!function($){$.fn.jqm=function(options){var o=$.extend({},$.jqm.params,options);return this.each((function(){var e=$(this),jqm=$(this).data("jqm");jqm||(jqm={ID:I++}),e.data("jqm",$.extend(o,jqm)).addClass("jqm-init"),o.trigger&&$(this).jqmAddTrigger(o.trigger)}))},$.fn.jqmAddTrigger=function(trigger){return this.each((function(){addTrigger($(this),"jqmShow",trigger)||err("jqmAddTrigger must be called on initialized modals")}))},$.fn.jqmAddClose=function(trigger){return this.each((function(){addTrigger($(this),"jqmHide",trigger)||err("jqmAddClose must be called on initialized modals")}))},$.fn.jqmShow=function(trigger){return this.each((function(){!this._jqmShown&&show($(this),trigger)}))},$.fn.jqmHide=function(trigger){return this.each((function(){this._jqmShown&&hide($(this),trigger)}))};var err=function(msg){window.console&&window.console.error&&window.console.error(msg)},show=function(e,t){var o=e.data("jqm"),t=t||window.event,z=parseInt(e.css("z-index"));if(void 0===o.noOverlay||void 0!==o.noOverlay&&!o.noOverlay){isNaN(z)&&(window.lastJqmZindex?window.lastJqmZindex=z=window.lastJqmZindex+2:z=3e3),window.lastJqmZindex=z;var v=$("<div></div>").addClass(o.overlayClass).css({height:"100%",width:"100%",position:"fixed",left:0,top:0,"z-index":z-1,opacity:o.overlay/100});e.css("z-index",z)}else{var v=$("");e.css("z-index",2999)}if(h={w:e,c:o,o:v,t:t},o.ajax){var target=o.target||e,url=o.ajax;target="string"==typeof target?$(target,e):$(target),"@"==url.substr(0,1)&&(url=$(t).attr(url.substring(1))),target.html(o.ajaxText).load(url,(function(){o.onLoad&&o.onLoad.call(this,h),open(h)}))}else open(h)},hide=function(e,t){var o=e.data("jqm"),t=t||window.event,h={w:e,c:o,o:e.data("jqmv"),t:t};close(h)},onShow=function(hash){return!hash.w[0]._jqmShown&&(hash.c.overlay>0&&hash.o.prependTo("#popup_iframe_wrapper"),hash.w.show(),$.jqm.focusFunc(hash.w),!0)},onHide=function(hash){return hash.w.hide()&&hash.o&&hash.o.remove(),!0},addTrigger=function(e,key,trigger){return!!e.data("jqm")&&$(trigger).each((function(){this[key]=this[key]||[],this[key].push(e)})).click((function(){var trigger=this;return $.each(this[key],(function(i,e){e[key](trigger)})),!1}))},open=function(h){var e=h.w,v=h.o,o=h.c;!1!==o.onShow(h)&&(e[0]._jqmShown=!0,o.modal?(!A[0]&&F("bind"),A.push(e)):e.jqmAddClose(v),o.closeClass&&e.jqmAddClose($("."+o.closeClass,e)),o.toTop&&v&&e.before('<span id="jqmP'+o.ID+'"></span>').insertAfter(v),e.data("jqmv",v))},close=function(h){var e=h.w,v=h.o,o=h.c;!1!==o.onHide(h)&&(e[0]._jqmShown=!1,o.modal&&(A.pop(),!A[0]&&F("unbind")),o.toTop&&v&&$("#jqmP"+o.ID).after(e).remove())},F=function(t){$(document)[t]("keypress keydown mousedown",X)},X=function(e){var modal=$(e.target).data("jqm")||$(e.target).parents(".jqm-init:first").data("jqm"),activeModal=A[A.length-1].data("jqm");return!(!modal||modal.ID!=activeModal.ID)||$.jqm.focusFunc(activeModal)},I=0,A=[];$.jqm={params:{overlay:50,overlayClass:"jqmOverlay",closeClass:"jqmClose",trigger:".jqModal",ajax:!1,target:!1,ajaxText:"",modal:!1,toTop:!1,onShow:onShow,onHide:onHide,onLoad:!1},focusFunc:function(e){return $(":input:visible:first",e).focus(),!1}}}(jQuery);
//# sourceMappingURL=jqModal.min.js.map